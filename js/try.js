function resolveValue(e,t){var a=null;if(e){var n=t.split("."),a=e;if(n.length>0)for(var o=0;o<n.length;o++)a&&(a=a[n[o]]);else a=a[t]}return a}function saveValue(e,t,a){for(var n=e,o=t.split("."),i=o.pop(),s=0;s<o.length;s++)n&&(n=n[o[s]]);n[i]=a}function load(e,t){$("."+e+"-content").find("input[name]").each(function(){var e=$(this),a=e.prop("name"),n=resolveValue(t,a);switch(e.prop("type")){case"checkbox":e.prop("checked",n);break;case"radio":e.prop("checked",e.val()==""+n);break;default:e.val(n)}})}function save(e,t){$("."+e+"-content").find("input[name]").each(function(){var e=$(this),a=e.prop("name"),n=e.val(),o=e.data("type");switch(o){case"bool":n="true"==n}switch(e.prop("type")){case"checkbox":saveValue(t,a,e.prop("checked"));break;case"radio":e.prop("checked")&&saveValue(t,a,n);break;case"number":saveValue(t,a,+n);break;default:saveValue(t,a,n)}}),LOCALSTROAGE_ENABLED&&localStorage.setItem(e,JSON.stringify(t))}alertify.defaults.closableByDimmer=!1,alertify.defaults.transition="zoom",alertify.defaults.padding=!1,alertify.defaults.glossary.title="rtlcss",alertify.defaults.glossary.ok="Save",alertify.defaults.glossary.cancel="Discard",$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var OPTIONS_DEFAULTS={autoRename:!1,autoRenameStrict:!1,blacklist:{},clean:!0,greedy:!1,processUrls:{atrule:!1,decl:!1},stringMap:[{name:"left-right",priority:100,search:["left","Left","LEFT"],replace:["right","Right","RIGHT"],options:{scope:"*",ignoreCase:!1}},{name:"ltr-rtl",priority:100,search:["ltr","Ltr","LTR"],replace:["rtl","Rtl","RTL"],options:{scope:"*",ignoreCase:!1}}]},SETTINGS_DEFAULTS={autoRun:!0,beautifySettings:{eol:"\\n",indent_char:" ",indent_size:2,indent_with_tabs:!1,selector_separator_newline:!0,newline_between_rules:!0,end_with_newline:!1}},LOCALSTROAGE_ENABLED,OPTIONS,SETTINGS;$(function(){var e="rtlcss";try{localStorage.setItem(e,e),localStorage.removeItem(e),LOCALSTROAGE_ENABLED=!0,OPTIONS=JSON.parse(localStorage.getItem("options"))||OPTIONS_DEFAULTS,SETTINGS=JSON.parse(localStorage.getItem("settings"))||SETTINGS_DEFAULTS}catch(t){LOCALSTROAGE_ENABLED=!1,OPTIONS=OPTIONS_DEFAULTS,SETTINGS=SETTINGS_DEFAULTS}load("settings",SETTINGS),load("options",OPTIONS);var a=$(".monaco-input"),n=$(".monaco-output"),o=$(".monaco-diff"),i=$(".fa-spin"),s={language:"css",theme:"vs-dark",scrollBeyondLastLine:!1,scrollbar:{useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,vertical:"visible",horizontal:"visible",verticalScrollbarSize:10,horizontalScrollbarSize:10,arrowSize:30}};require.config({paths:{vs:"https://cdn.rtlcss.com/assets/monaco-editor/min/vs"}}),window.MonacoEnvironment={getWorkerUrl:function(e,t){return"monaco-editor-worker-loader-proxy.js"}},require(["vs/editor/editor.main","vs/languages/lib/common/beautify-html"],function(){function e(){SETTINGS.autoRun&&(r(!0),clearTimeout(d),d=setTimeout(t,500))}function t(){var e,t=l.getValue();try{e=rtlcss.process(t,OPTIONS)}catch(a){e="/*"+a+"*/"}c.setValue(e),r(!1)}function r(e){i.css("visibility",e?"visible":"hidden")}var l=monaco.editor.create(a[0],s),c=monaco.editor.create(n[0],$.extend(s,{readOnly:!0})),u=monaco.editor.createDiffEditor(o[0],$.extend(s,{renderSideBySide:!1,theme:"vs-dark"}));o.css("display","none"),l.setValue([".example {","   direction:ltr;","   margin: 0;","   padding: 1em 2em .5em 1em;","   background-color: #353639;",'   font-family: "Droid Sans", sans-serif/*rtl:prepend:"Droid Arabic Kufi",*/;',"   font-size:16px/*rtl:14px*/;","}"].join("\n"));var d;l.onDidChangeModelContent(e),t(),$(window).resize(function(){l.layout(),c.layout(),u.layout()}),require(["vs/languages/lib/common/beautify-css"],function(e){monaco.languages.registerDocumentFormattingEditProvider("css",{provideDocumentFormattingEdits:function(t,a,n){var o=$E.getModel(),i=o.getFullModelRange(),s=e.css_beautify(o.getValue(),SETTINGS.beautifySettings);return[{range:i,text:s}]}}),$(".action.beautify").click(function(){l.getAction("editor.action.format").run()}).css("display","");var t=$(".loading").addClass("hide");setTimeout(function(){t.remove()},500)}),$(".options-content").find("input[name]").on("change",function(){save("options",OPTIONS),e()}),$(".action.settings").click(function(){load("settings",SETTINGS),alertify.confirm("Settings",$(".settings-content")[0],function(){var e=$(this.elements.body).find("form");return e[0].checkValidity()?(save("settings",SETTINGS),S.css("display",SETTINGS.autoRun?"none":""),void(LOCALSTROAGE_ENABLED||alertify.warning("Please allow local storage to be able to remember your preferences!",15))):(e.find(":submit").click(),!1)},null).set("reverseButtons",!0)});var f=$(".action.compare"),p=$(".action.close").css("display","none"),m=$(".action.copy"),S=$(".action.run");S.click(function(){t()}),S.css("display",SETTINGS.autoRun?"none":"");var g=new Clipboard(m[0],{text:function(e){return c.getValue()}});g.on("success",function(e){alertify.success("Copied!",5).dismissOthers()}),g.on("error",function(e){alertify.error("Copy failed.",5)}),f.click(function(){r(!0);var e=c.getValue();u.setModel({original:monaco.editor.createModel(l.getValue(),"css"),modified:monaco.editor.createModel(e,"css")}),o.css("display",""),n.css("display","none"),u.layout(),p.css("display",""),f.css("display","none"),m.css("display","none"),r(!1)}),p.click(function(){p.css("display","none"),f.css("display",""),m.css("display",""),n.css("display",""),o.css("display","none")}),window.$E=l,window.$O=c})});