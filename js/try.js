function resolveValue(e,t){var a=null;if(e){var i=t.split("."),a=e;if(i.length>0)for(var n=0;n<i.length;n++)a&&(a=a[i[n]]);else a=a[t]}return a}function saveValue(e,t,a){for(var i=e,n=t.split("."),o=n.pop(),s=0;s<n.length;s++)i&&(i=i[n[s]]);i[o]=a}function load(e,t){$("."+e+"-content").find("input[name]").each(function(){var e=$(this),a=e.prop("name"),i=resolveValue(t,a);switch(e.prop("type")){case"checkbox":e.prop("checked",i);break;case"radio":e.prop("checked",e.val()==""+i);break;default:e.val(i)}})}function save(e,t){$("."+e+"-content").find("input[name]").each(function(){var e=$(this),a=e.prop("name"),i=e.val(),n=e.data("type");switch(n){case"bool":i="true"==i}switch(e.prop("type")){case"checkbox":saveValue(t,a,e.prop("checked"));break;case"radio":e.prop("checked")&&saveValue(t,a,i);break;case"number":saveValue(t,a,+i);break;default:saveValue(t,a,i)}}),LOCALSTROAGE_ENABLED&&localStorage.setItem(e,JSON.stringify(t))}alertify.defaults.closableByDimmer=!1,alertify.defaults.transition="zoom",alertify.defaults.padding=!1,alertify.defaults.glossary.title="rtlcss",alertify.defaults.glossary.ok="Save",alertify.defaults.glossary.cancel="Discard",$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var OPTIONS_DEFAULTS={autoRename:!1,autoRenameStrict:!1,blacklist:{},clean:!0,greedy:!1,processUrls:{atrule:!1,decl:!1},stringMap:[{name:"left-right",priority:100,search:["left","Left","LEFT"],replace:["right","Right","RIGHT"],options:{scope:"*",ignoreCase:!1}},{name:"ltr-rtl",priority:100,search:["ltr","Ltr","LTR"],replace:["rtl","Rtl","RTL"],options:{scope:"*",ignoreCase:!1}}]},SETTINGS_DEFAULTS={autoRun:!0,beautifySettings:{eol:"\\n",indent_char:" ",indent_size:2,indent_with_tabs:!1,selector_separator_newline:!0,newline_between_rules:!0,end_with_newline:!1}},LOCALSTROAGE_ENABLED,OPTIONS,SETTINGS;$(function(){var e="rtlcss";try{localStorage.setItem(e,e),localStorage.removeItem(e),LOCALSTROAGE_ENABLED=!0,OPTIONS=JSON.parse(localStorage.getItem("options"))||OPTIONS_DEFAULTS,SETTINGS=JSON.parse(localStorage.getItem("settings"))||SETTINGS_DEFAULTS}catch(t){LOCALSTROAGE_ENABLED=!1,OPTIONS=OPTIONS_DEFAULTS,SETTINGS=SETTINGS_DEFAULTS}load("settings",SETTINGS),load("options",OPTIONS);var a=$(".monaco-input"),i=$(".monaco-output"),n=$(".monaco-diff"),o=$(".fa-spin"),s={language:"css",theme:"vs-dark",scrollBeyondLastLine:!1,scrollbar:{useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,vertical:"visible",horizontal:"visible",verticalScrollbarSize:10,horizontalScrollbarSize:10,arrowSize:30}};require.config({paths:{vs:"/assets/monaco-editor/min/vs"}}),require(["vs/editor/editor.main","vs/languages/lib/common/beautify-html"],function(){function e(){SETTINGS.autoRun&&(r(!0),clearTimeout(d),d=setTimeout(t,500))}function t(){var e,t=l.getValue();try{e=rtlcss.process(t,OPTIONS)}catch(a){e="/*"+a+"*/"}c.setValue(e),r(!1)}function r(e){o.css("visibility",e?"visible":"hidden")}var l=monaco.editor.create(a[0],s),c=monaco.editor.create(i[0],$.extend(s,{readOnly:!0})),u=monaco.editor.createDiffEditor(n[0],$.extend(s,{renderSideBySide:!1,theme:"vs-dark"}));n.css("display","none"),l.setValue([".example {","   direction:ltr;","   margin: 0;","   padding: 1em 2em .5em 1em;","   background-color: #353639;",'   font-family: "Droid Sans", sans-serif/*rtl:prepend:"Droid Arabic Kufi",*/;',"   font-size:16px/*rtl:14px*/;","}"].join("\n"));var d;l.onDidChangeModelContent(e),t(),$(window).resize(function(){l.layout(),c.layout(),u.layout()}),require(["vs/languages/lib/common/beautify-css"],function(e){monaco.languages.registerDocumentFormattingEditProvider("css",{provideDocumentFormattingEdits:function(t,a,i){var n=$E.getModel(),o=n.getFullModelRange(),s=e.css_beautify(n.getValue(),SETTINGS.beautifySettings);return[{range:o,text:s}]}}),$(".action.beautify").click(function(){l.getAction("editor.action.format").run()}).css("display","")}),$(".options-content").find("input[name]").on("change",function(){save("options",OPTIONS),e()}),$(".action.settings").click(function(){load("settings",SETTINGS),alertify.confirm("Settings",$(".settings-content")[0],function(){var e=$(this.elements.body).find("form");return e[0].checkValidity()?(save("settings",SETTINGS),m.css("display",SETTINGS.autoRun?"none":""),void(LOCALSTROAGE_ENABLED||alertify.warning("Please allow local storage to be able to remember your preferences!",15))):(e.find(":submit").click(),!1)},null).set("reverseButtons",!0)});var f=$(".action.compare"),p=$(".action.close").css("display","none"),S=$(".action.copy"),m=$(".action.run");m.click(function(){t()}),m.css("display",SETTINGS.autoRun?"none":"");var g=new Clipboard(S[0],{text:function(e){return c.getValue()}});g.on("success",function(e){alertify.success("Copied!",5).dismissOthers()}),g.on("error",function(e){alertify.error("Copy failed.",5)}),f.click(function(){r(!0);var e=c.getValue();u.setModel({original:monaco.editor.createModel(l.getValue(),"css"),modified:monaco.editor.createModel(e,"css")}),n.css("display",""),i.css("display","none"),u.layout(),p.css("display",""),f.css("display","none"),S.css("display","none"),r(!1)}),p.click(function(){p.css("display","none"),f.css("display",""),S.css("display",""),i.css("display",""),n.css("display","none")}),window.$E=l,window.$O=c})});